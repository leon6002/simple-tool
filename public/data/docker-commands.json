{
    "id": "docker",
    "icon": "siDocker",
    "title": "Docker Cheatsheet",
    "description": "Quick reference for Docker commands. Never forget how to use Git again!",
    "commands": [
        {
            "id": "run",
            "name": "docker run",
            "description": "Run a command in a new container",
            "command": "docker run [OPTIONS] IMAGE [COMMAND] [ARG...]",
            "example": "docker run nginx\ndocker run -d -p 8080:80 nginx\ndocker run -it ubuntu bash",
            "category": "management"
        },
        {
            "id": "ps",
            "name": "docker ps",
            "description": "List containers",
            "command": "docker ps [OPTIONS]",
            "example": "docker ps\ndocker ps -a\ndocker ps -l",
            "category": "management"
        },
        {
            "id": "stop",
            "name": "docker stop",
            "description": "Stop one or more running containers",
            "command": "docker stop [OPTIONS] CONTAINER [CONTAINER...]",
            "example": "docker stop container_name\ndocker stop container_id",
            "category": "management"
        },
        {
            "id": "start",
            "name": "docker start",
            "description": "Start one or more stopped containers",
            "command": "docker start [OPTIONS] CONTAINER [CONTAINER...]",
            "example": "docker start container_name\ndocker start container_id",
            "category": "management"
        },
        {
            "id": "rm",
            "name": "docker rm",
            "description": "Remove one or more containers",
            "command": "docker rm [OPTIONS] CONTAINER [CONTAINER...]",
            "example": "docker rm container_name\ndocker rm -f container_name",
            "category": "management"
        },
        {
            "id": "exec",
            "name": "docker exec",
            "description": "Run a command in a running container",
            "command": "docker exec [OPTIONS] CONTAINER COMMAND [ARG...]",
            "example": "docker exec -it container_name bash\ndocker exec container_name ls /app",
            "category": "management"
        },
        {
            "id": "logs",
            "name": "docker logs",
            "description": "Fetch the logs of a container",
            "command": "docker logs [OPTIONS] CONTAINER",
            "example": "docker logs container_name\ndocker logs -f container_name\ndocker logs --tail 50 container_name",
            "category": "management"
        },
        {
            "id": "build",
            "name": "docker build",
            "description": "Build an image from a Dockerfile",
            "command": "docker build [OPTIONS] PATH | URL | -",
            "example": "docker build .\ndocker build -t myapp .\ndocker build -f Dockerfile.prod .",
            "category": "images"
        },
        {
            "id": "images",
            "name": "docker images",
            "description": "List images",
            "command": "docker images [OPTIONS] [REPOSITORY[:TAG]]",
            "example": "docker images\ndocker images nginx",
            "category": "images"
        },
        {
            "id": "pull",
            "name": "docker pull",
            "description": "Pull an image or a repository from a registry",
            "command": "docker pull [OPTIONS] NAME[:TAG|@DIGEST]",
            "example": "docker pull nginx\ndocker pull nginx:alpine",
            "category": "images"
        },
        {
            "id": "push",
            "name": "docker push",
            "description": "Push an image or a repository to a registry",
            "command": "docker push [OPTIONS] NAME[:TAG|@DIGEST]",
            "example": "docker push myusername/myapp:latest",
            "category": "images"
        },
        {
            "id": "rmi",
            "name": "docker rmi",
            "description": "Remove one or more images",
            "command": "docker rmi [OPTIONS] IMAGE [IMAGE...]",
            "example": "docker rmi image_name\ndocker rmi -f image_name",
            "category": "images"
        },
        {
            "id": "network-ls",
            "name": "docker network ls",
            "description": "List networks",
            "command": "docker network ls [OPTIONS]",
            "example": "docker network ls",
            "category": "networking"
        },
        {
            "id": "network-create",
            "name": "docker network create",
            "description": "Create a network",
            "command": "docker network create [OPTIONS] NETWORK",
            "example": "docker network create mynetwork\ndocker network create --driver bridge mynetwork",
            "category": "networking"
        },
        {
            "id": "network-inspect",
            "name": "docker network inspect",
            "description": "Display detailed information on one or more networks",
            "command": "docker network inspect [OPTIONS] NETWORK [NETWORK...]",
            "example": "docker network inspect mynetwork",
            "category": "networking"
        },
        {
            "id": "volume-ls",
            "name": "docker volume ls",
            "description": "List volumes",
            "command": "docker volume ls [OPTIONS]",
            "example": "docker volume ls",
            "category": "volumes"
        },
        {
            "id": "volume-create",
            "name": "docker volume create",
            "description": "Create a volume",
            "command": "docker volume create [OPTIONS] [VOLUME]",
            "example": "docker volume create myvolume",
            "category": "volumes"
        },
        {
            "id": "volume-inspect",
            "name": "docker volume inspect",
            "description": "Display detailed information on one or more volumes",
            "command": "docker volume inspect [OPTIONS] VOLUME [VOLUME...]",
            "example": "docker volume inspect myvolume",
            "category": "volumes"
        }
    ],
    "categories": [
        {
            "id": "management",
            "name": "management",
            "type": "command",
            "description": ""
        },
        {
            "id": "images",
            "name": "images",
            "type": "command",
            "description": ""
        },
        {
            "id": "networking",
            "name": "networking",
            "type": "command",
            "description": ""
        },
        {
            "id": "volumes",
            "name": "volumes",
            "type": "command",
            "description": ""
        },
        {
            "id": "容器管理",
            "name": "容器管理",
            "type": "template",
            "description": ""
        },
        {
            "id": "应用部署",
            "name": "应用部署",
            "type": "template",
            "description": ""
        },
        {
            "id": "容器构建",
            "name": "容器构建",
            "type": "template",
            "description": ""
        },
        {
            "id": "数据库",
            "name": "数据库",
            "type": "template",
            "description": ""
        }
    ],
    "templates": [
        {
            "id": "postgresql-pgadmin",
            "category": "数据库",
            "language": "yml",
            "name": "PostgreSQL 服务栈",
            "description": "提供 PostgreSQL 数据库及 pgAdmin 管理界面的 Docker 配置。",
            "content": "services:\n  postgres:\n    container_name: postgres\n    image: postgres:latest\n    environment:\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PW}\n      - POSTGRES_DB=${POSTGRES_DB} #optional (specify default database instead of $POSTGRES_DB)\n    ports:\n      - \"5432:5432\"\n    restart: always\n\n  pgadmin:\n    container_name: pgadmin\n    image: dpage/pgadmin4:latest\n    environment:\n      - PGADMIN_DEFAULT_EMAIL=${PGADMIN_MAIL}\n      - PGADMIN_DEFAULT_PASSWORD=${PGADMIN_PW}\n    ports:\n      - \"5050:80\"\n    restart: always"
        },
        {
            "id": "portainer",
            "category": "容器管理",
            "language": "yml",
            "name": "Portainer服务",
            "description": "用于管理Docker容器的Web界面服务。",
            "content": "services:\n  portainer:\n    image: portainer/portainer-ce:alpine\n    container_name: portainer\n    command: -H unix:///var/run/docker.sock\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n      - \"portainer_data:/data\"\n    restart: always\n\nvolumes:\n  portainer_data:"
        },
        {
            "id": "Dockerfile-go",
            "category": "容器构建",
            "language": "docker",
            "name": "Go应用多阶段构建",
            "description": "支持开发与生产的Go应用Dockerfile",
            "content": "# syntax=docker/dockerfile:1.4\nFROM --platform=$BUILDPLATFORM golang:1.18-alpine AS builder\n\nWORKDIR /code\n\nENV CGO_ENABLED 0\nENV GOPATH /go\nENV GOCACHE /go-build\n\nCOPY go.mod go.sum ./\nRUN --mount=type=cache,target=/go/pkg/mod/cache \\\n    go mod download\n\nCOPY . .\n\nRUN --mount=type=cache,target=/go/pkg/mod/cache \\\n    --mount=type=cache,target=/go-build \\\n    go build -o bin/backend main.go\n\nCMD [\"/code/bin/backend\"]\n\nFROM builder as dev-envs\n\nRUN <<EOF\napk update\napk add git\nEOF\n\nRUN <<EOF\naddgroup -S docker\nadduser -S --shell /bin/bash --ingroup docker vscode\nEOF\n\n# install Docker tools (cli, buildx, compose)\nCOPY --from=gloursdocker/docker / /\n\nCMD [\"go\", \"run\", \"main.go\"]\n\nFROM scratch\nCOPY --from=builder /code/bin/backend /usr/local/bin/backend\nCMD [\"/usr/local/bin/backend\"]"
        },
        {
            "id": "Dockerfile-node",
            "category": "应用部署",
            "language": "docker",
            "name": "Node.js应用镜像",
            "description": "基于UBI的Node.js生产环境Docker镜像",
            "content": "FROM registry.access.redhat.com/ubi8/nodejs-16:latest\n\n# Copy package.json and package-lock.json\nCOPY package*.json ./\n\n# Install npm production packages \nRUN npm install --production\n\nCOPY . /opt/app-root/src\n\nENV NODE_ENV production\nENV PORT 3000\n\nEXPOSE 3000\n\nCMD [\"npm\", \"start\"]"
        }
    ]
}