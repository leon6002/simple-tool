version: "3.8"

services:
  simple-tool:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: simple-tool
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      # 挂载本地 data 目录到容器的 public/data 目录
      # 这样可以在不重新部署的情况下更新命令数据
      - ./data:/app/public/data
    environment:
      - NODE_ENV=production
      - THE_CAT_API_KEY=${THE_CAT_API_KEY}
      - SILICON_FLOW_API_KEY=${SILICON_FLOW_API_KEY}
      - AUTH_SECRET=${AUTH_SECRET:-change-this-to-a-random-secret-in-production}
      - ADMIN_USERNAME=${ADMIN_USERNAME:-admin}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-password}
    # Uncomment if you need environment variables from file
    # env_file:
    #   - .env.production
